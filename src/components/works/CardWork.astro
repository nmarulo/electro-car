---
import {getCollection} from 'astro:content';
import ModalWork from './ModalWork.astro';

export async function getStaticPaths() {
  const works = await getCollection('works');
  return works.map(work => ({
    params: {id: work.id},
    props: {work}
  }));
}
const {work} = Astro.props;
const {
  slug,
  data
} = work;
const {
  image,
  title,
  filter,
  tags
} = data;
const MODAL_WORK_ID = slug + '-modal-work';
---

<div class="card border-0">
  <img src={image}
       class="card-img"
       alt={title}>
  <div class="card-img-overlay">
    <div class="work-overlay-content">
      <button type="button"
              class="btn btn-lg fs-1 text-white stretched-link"
              data-bs-toggle="modal"
              data-bs-target={`#${MODAL_WORK_ID}`}>
        <i class="bi bi-zoom-in"></i>
      </button>
    </div>
  </div>
</div>

<ModalWork id={MODAL_WORK_ID}
           workId={slug}/>

<style>
  .card-img-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(220, 53, 69, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
  }

  .card:hover .card-img-overlay {
    opacity: 1;
  }
</style>
