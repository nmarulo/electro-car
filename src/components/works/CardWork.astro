---
import {getCollection, render} from 'astro:content';

export async function getStaticPaths() {
  const works = await getCollection('works');
  return works.map(work => ({
    params: {id: work.id},
    props: {work}
  }));
}
const {work} = Astro.props;
const {Content} = await render(work);
const {
  slug,
  data
} = work;
const {
  image,
  title,
  filter,
  tags
} = data;
---

<div class="card border-0 shadow h-100 work-card">
  <div class="work-img-container">
    <img src={image}
         class="card-img-top"
         alt={title}>
    <div class="work-overlay">
      <div class="work-overlay-content">
        <a href="#"
           class="btn btn-sm btn-light rounded-circle"><i class="bi bi-zoom-in"></i></a>
      </div>
    </div>
  </div>
  <div class="card-body">
    <Content/>
  </div>
  <div class="card-footer bg-white border-0">
    {
      tags.map(tag => (
        <span class="badge bg-danger me-2">{tag}</span>
      ))
    }
  </div>
</div>

<style>
  .work-img-container {
    position: relative;
    overflow: hidden;
  }

  .work-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(220, 53, 69, 0.8);
    display: flex;
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: all 0.3s ease;
  }

  .work-img-container:hover .work-overlay {
    opacity: 1;
  }
</style>
